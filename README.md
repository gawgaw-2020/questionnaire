# ログイン機能付きアンケートアプリ

スタッフ訪問用URL  
http://gawgaw.crap.jp/questionnaire/login/staff_login.php

管理者用URL  
http://gawgaw.crap.jp/questionnaire/administrator/


## スタッフへ向けてのアンケートを想定

学びたかった機能
* ログイン/ログアウト

前回作成したメモアプリから一歩進んで、アンケートアプリを作成することにしました。

入力時のバリデーション、最低限のセキュリティに関して以下の様な多くの学びがありました。

* 登録時の重複チェック
* 文字列・メールアドレスなどのバリデーション
* XSS対策、CSRF対策など最低限のセキュリティ
* アンケートに答えると、登録されているスタッフのステータスが変化

私が働いてきた職場では、アンケートやシフトの希望を集める際に手書きやLINEなどで実施していました。記入される形式も様々で、100人を超えると非常に大変だったのを覚えています。  
次回はアンケート内容をデータベースに入れる様な処理まで発展させたいです。


## 使用イメージ

スタッフ管理者の使用イメージ  

質問への回答が済んでいるかを一覧で確認できるようにしました。  
<img width="50%" src="demo-img/スクリーンショット 2020-09-16 21.38.33.png">  

アンケートに答える際には、ログインした情報を用いて名前とメールアドレスは入力されている状態にしました。  
<img width="50%" src="demo-img/スクリーンショット 2020-09-16 21.39.02.png">

アンケートに回答すると、「回答済み」にステータスが変化するようにしました。  
<img width="50%" src="demo-img/スクリーンショット 2020-09-16 21.39.56.png">

## 機能一覧
**スタッフ側機能**
* スタッフログイン機能
* アンケートへの回答画面
* アンケートへの回答の確認画面
* アンケートへの回答の完了画面
* 自動送信メール  
* ログアウト機能  

**責任者側機能**
* 責任者の鍵付き訪問
* スタッフ一覧画面
  * ID
  * 名前
  * メールアドレス
  * アンケートに答えたかどうか
* スタッフの登録機能


## データベース設計

### スタッフテーブル

users utf8mb4
|名前                   |カラム名           |データ型      |その他          |
|:----------------------|:------------------|:-------------|:---------------|
|スタッフID             |id                 |int           |AUTO INCREMENT  |
|名前                   |staff_name         |varchar(255)  |                |
|メールアドレス         |email              |varchar(255)  |unique          |
|パスワード             |password           |varchar(255)  |ハッシュ化      |
|アンケートに答えたか   |answer             |int           |初期値は0       |

## 入力のバリデーション

## 最低限のセキュリティ